var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,l=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(i)for(var t of i(a))s.call(a,t)&&n(e,t,a[t]);return e},o=(e,i)=>a(e,t(i));import{F as c}from"./filterAction.34a7e436.js";import{d,I as p,u as m,c as u,g as f}from"./ipDetail.e2627473.js";import{u as b,ae as y,y as g,af as h,U as j,V as v,I as w,b6 as I}from"./index.d73c0318.js";import{u as O,a as x,b as P,c as S}from"./index.d571304b.js";import{u as N}from"./useTablePagination.e436cb7c.js";import{u as k,a as C}from"./index.7cc91fe6.js";import{C as D}from"./index.10212801.js";import{T as _}from"./Table.d37fe026.js";var z=()=>{const{filter:e,setFilter:a}=O({type:"ip"}),{pagination:t,setPagination:i}=N(),{selectedItem:r,setSelectedItem:s}=k({}),{modal:n,setModal:z}=C({}),{data:A,setData:E}=x([]),{loading:T,setLoading:F}=P(!1),q=async a=>{try{F(!0);const r=await f(o(l({},e),{current:(null==a?void 0:a.current)||t.current,pageSize:(null==a?void 0:a.pageSize)||t.pageSize})),{items:s=[],total:n}=r;F(!1),E(s),i(o(l(l({},t),a||{}),{total:n}))}catch(r){}},K=[{title:"Ip",dataIndex:"ip"},{title:"Desc",dataIndex:"desc"},{title:"Action",render:(e,a)=>b(y,{children:[g("a",{onClick:()=>{s(l({},a)),z(o(l({},n),{visible:!0,title:"Edit"}))},children:"Edit"}),g("a",{className:"text-red-600",onClick:()=>{h.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await d(a._id),await q()}catch(e){}}})},children:"Delete"})]})}].map((e=>o(l({},e),{key:e.dataIndex})));return S(e,(()=>q(o(l({},t),{current:1})))),b("div",{children:[g(D,{className:"mb-4",children:b("div",{className:"grid grid-cols-4 gap-4",children:[j([{label:"Name",className:"mb-0",children:g(v,{value:e.name,onChange:t=>a(o(l({},e),{name:t.target.value})),placeholder:"ip/desc"})}]),g(c,{className:"mb-0",onQuery:()=>q(),onReset:()=>a({type:"ip"})})]})}),g(D,{title:g(w,{onClick:()=>{z(o(l({},n),{title:"Add",visible:!0})),s({})},type:"primary",children:"+ New Ip"}),children:g(_,{rowKey:e=>e._id,onChange:e=>q(e),pagination:t,loading:T,columns:K,dataSource:A})}),g(p,o(l({selectedItem:r,setSelectedItem:s},n),{onOk:()=>(async()=>{const{ip:e,desc:a}=r;if(!a||!e)return I.error("Please finish all required info");try{r._id?await m(r._id,r):await u(o(l({},r),{type:"ip"})),z(o(l({},n),{visible:!1})),await q()}catch(t){}})()}))]})};export{z as default};
