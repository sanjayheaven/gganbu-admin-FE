var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,d=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&n(e,a,t[a]);return e},s=(e,r)=>t(e,a(r));import{F as l}from"./filterAction.fed61267.js";import{O as c,u as m,z as p,P as u,S as f,U as b,J as g}from"./index.e94451d3.js";import{d as y,g as h}from"./product.b8f249ef.js";import{u as j,a as v,b as x,c as O}from"./index.12b98fe3.js";import{u as C}from"./useTablePagination.fad55048.js";import{u as I,a as S}from"./index.c344d948.js";import{S as w}from"./index.368d9b00.js";import{C as P}from"./index.39f2749e.js";import{T as k}from"./Table.720b178c.js";var N=()=>{const{filter:e,setFilter:t}=j({}),{pagination:a,setPagination:r}=C(),{selectedItem:i,setSelectedItem:o}=I({}),{modal:n,setModal:N}=S({}),{data:z,setData:A}=v([]),{loading:D,setLoading:E}=x(!1),T=c(),F=async t=>{E(!0);try{const i=await h(s(d({},e),{current:(null==t?void 0:t.current)||a.current,pageSize:(null==t?void 0:t.pageSize)||a.pageSize})),{items:o=[],total:n}=i;E(!1),A(o),r(s(d(d({},a),t||{}),{total:n}))}catch(i){}};O(e,(()=>F(s(d({},a),{current:1}))));const R=[{title:"Cover",dataIndex:"cover"},{title:"Name",dataIndex:"name"},{title:"Category",dataIndex:"category"},{title:"Remark",dataIndex:"remark"},{title:"Created At",dataIndex:"createdAt"},{title:"Action",dataIndex:"action",render:(e,t)=>m(w,{children:[p("a",{onClick:()=>{o(d({},t)),N(s(d({},n),{visible:!0,title:"Edit"}))},children:"Edit"}),p("a",{className:"text-red-600",onClick:()=>{u.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await y(t._id),await F()}catch(e){}}})},children:"Delete"})]})}].map((e=>s(d({},e),{key:e.dataIndex})));return m("div",{children:[p(P,{className:"mb-4",children:m("div",{className:"grid grid-cols-4 gap-4",children:[f([{label:"Search",className:"mb-0",children:p(b,{value:e.name,onChange:a=>t(s(d({},e),{name:a.target.value})),placeholder:"name"})}]),p(l,{className:"mb-0",onQuery:()=>F(),onReset:()=>t({})})]})}),p(P,{title:p(g,{onClick:()=>T("/product/productCreate"),type:"primary",children:"+ New Product"}),children:p(k,{rowKey:e=>e._id,onChange:e=>F(e),pagination:a,loading:D,columns:R,dataSource:z})})]})};export{N as default};
