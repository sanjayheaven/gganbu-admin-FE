import{u as S,c as k,b as C,a as N,d as F,F as W,T as D}from"./filterAction.bad607a6.js";import{d as v,I as A,u as M,c as _,g as j}from"./ipDetail.7b8d9539.js";import{j as o,bg as z,a as t,b9 as E,b as L,I as O,ad as T,ba as q}from"./index.fd722815.js";import{u as B,a as K}from"./index.9b56791e.js";import{C as f}from"./index.3e5b4951.js";const U=()=>{const{filter:r,setFilter:u}=S({type:"account"}),{pagination:c,setPagination:I}=k(),{selectedItem:a,setSelectedItem:n}=B({}),{modal:i,setModal:d}=K({}),{data:y,setData:b}=C([]),{loading:g,setLoading:m}=N(!1),p=async()=>{const{staffId:e}=a;if(!e)return q.error("Please finish all required info");try{a._id?await M(a._id,a):await _({...a,type:"account"}),d({...i,open:!1}),await l()}catch{}},l=async e=>{try{m(!0);const s=await j({...r,current:(e==null?void 0:e.current)||c.current,pageSize:(e==null?void 0:e.pageSize)||c.pageSize}),{items:h=[],total:x}=s;m(!1),b(h),I({...c,...e||{},total:x})}catch{}},w=[{title:"Ip",dataIndex:"ip"},{title:"Desc",dataIndex:"desc"},{title:"Action",render:(e,s)=>o(z,{children:[t("a",{onClick:()=>{n({...s}),d({...i,open:!0,title:"Edit"})},children:"Edit"}),t("a",{className:"text-red-600",onClick:()=>{E.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await v(s._id),await l()}catch{}}})},children:"Delete"})]})}].map(e=>({...e,key:e.dataIndex}));return F(r,()=>l({...c,current:1})),o("div",{children:[t(f,{className:"mb-4",children:o("div",{className:"grid grid-cols-4 gap-4",children:[L([{label:"Name",className:"mb-0",children:t(O,{value:r.name,onChange:e=>u({...r,name:e.target.value}),placeholder:"ip/desc"})}]),t(W,{className:"mb-0",onQuery:()=>l(),onReset:()=>u({type:"ip"})})]})}),t(f,{title:t(T,{onClick:()=>{d({...i,title:"Add",open:!0}),n({})},type:"primary",children:"+ New Account"}),children:t(D,{rowKey:e=>e._id,onChange:e=>l(e),pagination:c,loading:g,columns:w,dataSource:y})}),t(A,{selectedItem:a,setSelectedItem:n,...i,onOk:()=>p()})]})};export{U as default};
