var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,s=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&n(e,t,a[t]);if(r)for(var t of r(a))o.call(a,t)&&n(e,t,a[t]);return e},c=(e,r)=>a(e,t(r));import{F as d}from"./filterAction.4dc74e04.js";import{O as l,u as m,z as p,a9 as u,R as b,S as f,J as g}from"./index.282bde3a.js";import{d as y,g as h}from"./product.3b069688.js";import{u as j,a as v,b as x,c as O}from"./index.503b99c7.js";import{u as C}from"./useTablePagination.03cfaf4a.js";import{u as S,a as w}from"./index.a3acbd1a.js";import{S as I}from"./index.443a0a3e.js";import{C as P}from"./index.04e6f108.js";import{T as k}from"./Table.77e59312.js";var N=()=>{const{filter:e,setFilter:a}=j({}),{pagination:t,setPagination:r}=C(),{setSelectedItem:i}=S({}),{modal:o,setModal:n}=w({}),{data:N,setData:z}=v([]),{loading:A,setLoading:D}=x(!1),E=l(),R=async a=>{D(!0);try{const i=await h(c(s({},e),{current:(null==a?void 0:a.current)||t.current,pageSize:(null==a?void 0:a.pageSize)||t.pageSize})),{items:o=[],total:n}=i;D(!1),z(o),r(c(s(s({},t),a||{}),{total:n}))}catch(i){}};O(e,(()=>R(c(s({},t),{current:1}))));const T=[{title:"Cover",dataIndex:"cover"},{title:"Name",dataIndex:"name"},{title:"Category",dataIndex:"category"},{title:"Remark",dataIndex:"remark"},{title:"Created At",dataIndex:"createdAt"},{title:"Action",dataIndex:"action",render:(e,a)=>m(I,{children:[p("a",{onClick:()=>{i(s({},a)),n(c(s({},o),{visible:!0,title:"Edit"}))},children:"Edit"}),p("a",{className:"text-red-600",onClick:()=>{u.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await y(a._id),await R()}catch(e){}}})},children:"Delete"})]})}].map((e=>c(s({},e),{key:e.dataIndex})));return m("div",{children:[p(P,{className:"mb-4",children:m("div",{className:"grid grid-cols-4 gap-4",children:[b([{label:"Search",className:"mb-0",children:p(f,{value:e.name,onChange:t=>a(c(s({},e),{name:t.target.value})),placeholder:"name"})}]),p(d,{className:"mb-0",onQuery:()=>R(),onReset:()=>a({})})]})}),p(P,{title:p(g,{onClick:()=>E("/product/productCreate"),type:"primary",children:"+ New Product"}),children:p(k,{rowKey:e=>e._id,onChange:e=>R(e),pagination:t,loading:A,columns:T,dataSource:N})})]})};export{N as default};
