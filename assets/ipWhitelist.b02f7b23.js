import{u as E,c as x,b as T,a as k,d as w,F as N,T as W}from"./filterAction.6b83facd.js";import{d as F,I as _,u as v,c as A,g as L}from"./ipDetailModal.ccb78e42.js";import{u as M,a as d,bh as O,j as a,b9 as j,b as z,I as R,ae as q,ba as B}from"./index.4562f32f.js";import{u as H,a as K}from"./index.9bce12ed.js";import{C as I}from"./index.443dfdae.js";const X=()=>{const{filter:c,setFilter:h}=E({type:"ip"}),{pagination:i,setPagination:y}=x(),{selectedItem:r,setSelectedItem:o}=H({}),{modal:n,setModal:u}=K({}),{data:p,setData:b}=T([]),{loading:g,setLoading:f}=k(!1),{t}=M(),C=async()=>{const{ip:e,desc:s}=r;if(!s||!e)return B.error("Please finish all required info");try{r._id?await v(r._id,r):await A({...r,type:"ip"}),u({...n,open:!1}),await l()}catch{}},l=async e=>{try{f(!0);const s=await L({...c,current:(e==null?void 0:e.current)||i.current,pageSize:(e==null?void 0:e.pageSize)||i.pageSize}),{items:m=[],total:D}=s;f(!1),b(m),y({...i,...e||{},total:D})}catch{}},S=[{title:"IP",dataIndex:"ip"},{title:t("DESC"),dataIndex:"desc"},{title:t("ACTION"),render:(e,s)=>d(O,{children:[a("a",{onClick:()=>{o({...s}),u({...n,open:!0,title:t("EDIT")})},children:t("EDIT")}),a("a",{className:"text-red-600",onClick:()=>{j.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await F(s._id),await l()}catch{}}})},children:t("DELETE")})]})}].map(e=>({...e,key:e.dataIndex}));return w(c,()=>l({...i,current:1})),d("div",{children:[a(I,{className:"mb-4",children:d("div",{className:"grid grid-cols-4 gap-4",children:[z([{label:t("SEARCH"),className:"mb-0",children:a(R,{value:c.name,onChange:e=>h({...c,name:e.target.value}),placeholder:"ip/desc"})}]),a(N,{className:"mb-0",onQuery:()=>l(),onReset:()=>h({type:"ip"})})]})}),a(I,{title:d(q,{onClick:()=>{u({...n,title:t("ADD"),open:!0}),o({})},type:"primary",children:["+ ",t("security.NEW_IP")]}),children:a(W,{rowKey:e=>e._id,onChange:e=>l(e),pagination:i,loading:g,columns:S,dataSource:p})}),a(_,{selectedItem:r,setSelectedItem:o,...n,onOk:()=>C()})]})};export{X as default};
