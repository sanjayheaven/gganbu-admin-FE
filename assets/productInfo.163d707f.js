var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,c=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&o(e,t,a[t]);if(r)for(var t of r(a))n.call(a,t)&&o(e,t,a[t]);return e},l=(e,r)=>a(e,t(r));import{F as s}from"./filterAction.34a7e436.js";import{Q as d,u as m,ae as p,y as u,af as b,U as f,V as g,I as y}from"./index.d73c0318.js";import{d as h,g as j}from"./product.9b716a90.js";import{u as v,a as x,b as C,c as I}from"./index.d571304b.js";import{u as O}from"./useTablePagination.e436cb7c.js";import{u as w,a as P}from"./index.7cc91fe6.js";import{C as S}from"./index.10212801.js";import{T as k}from"./Table.d37fe026.js";var N=()=>{const{filter:e,setFilter:a}=v({}),{pagination:t,setPagination:r}=O(),{setSelectedItem:i}=w({}),{modal:n,setModal:o}=P({}),{data:N,setData:A}=x([]),{loading:z,setLoading:D}=C(!1),E=d(),T=async a=>{D(!0);try{const i=await j(l(c({},e),{current:(null==a?void 0:a.current)||t.current,pageSize:(null==a?void 0:a.pageSize)||t.pageSize})),{items:n=[],total:o}=i;D(!1),A(n),r(l(c(c({},t),a||{}),{total:o}))}catch(i){}};I(e,(()=>T(l(c({},t),{current:1}))));const F=[{title:"Cover",dataIndex:"cover"},{title:"Name",dataIndex:"name"},{title:"Category",dataIndex:"category"},{title:"Remark",dataIndex:"remark"},{title:"Created At",dataIndex:"createdAt"},{title:"Action",dataIndex:"action",render:(e,a)=>m(p,{children:[u("a",{onClick:()=>{i(c({},a)),o(l(c({},n),{visible:!0,title:"Edit"}))},children:"Edit"}),u("a",{className:"text-red-600",onClick:()=>{b.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await h(a._id),await T()}catch(e){}}})},children:"Delete"})]})}].map((e=>l(c({},e),{key:e.dataIndex})));return m("div",{children:[u(S,{className:"mb-4",children:m("div",{className:"grid grid-cols-4 gap-4",children:[f([{label:"Search",className:"mb-0",children:u(g,{value:e.name,onChange:t=>a(l(c({},e),{name:t.target.value})),placeholder:"name"})}]),u(s,{className:"mb-0",onQuery:()=>T(),onReset:()=>a({})})]})}),u(S,{title:u(y,{onClick:()=>E("/product/productCreate"),type:"primary",children:"+ New Product"}),children:u(k,{rowKey:e=>e._id,onChange:e=>T(e),pagination:t,loading:z,columns:F,dataSource:N})})]})};export{N as default};
