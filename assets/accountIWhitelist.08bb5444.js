import{u as T,c as x,b as N,a as k,d as p,F as w,T as W}from"./filterAction.6b83facd.js";import{d as F,I as A,u as O,c as _,g as v}from"./ipDetailModal.ccb78e42.js";import{u as L,a as o,bh as M,j as a,b9 as j,b as z,I as R,ae as q,ba as B}from"./index.4562f32f.js";import{u as H,a as K}from"./index.9bce12ed.js";import{C as I}from"./index.443dfdae.js";const V=()=>{const{filter:i,setFilter:m}=T({type:"account"}),{pagination:c,setPagination:y}=x(),{selectedItem:s,setSelectedItem:d}=H({}),{modal:n,setModal:u}=K({}),{data:C,setData:b}=N([]),{loading:S,setLoading:h}=k(!1),{t}=L(),g=async()=>{const{staffId:e}=s;if(!e)return B.error("Please finish all required info");try{s._id?await O(s._id,s):await _({...s,type:"account"}),u({...n,open:!1}),await l()}catch{}},l=async e=>{try{h(!0);const r=await v({...i,current:(e==null?void 0:e.current)||c.current,pageSize:(e==null?void 0:e.pageSize)||c.pageSize}),{items:f=[],total:E}=r;h(!1),b(f),y({...c,...e||{},total:E})}catch{}},D=[{title:"IP",dataIndex:"ip"},{title:t("DESC"),dataIndex:"desc"},{title:t("ACTION"),render:(e,r)=>o(M,{children:[a("a",{onClick:()=>{d({...r}),u({...n,open:!0,title:t("EDIT")})},children:t("EDIT")}),a("a",{className:"text-red-600",onClick:()=>{j.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await F(r._id),await l()}catch{}}})},children:t("DELETE")})]})}].map(e=>({...e,key:e.dataIndex}));return p(i,()=>l({...c,current:1})),o("div",{children:[a(I,{className:"mb-4",children:o("div",{className:"grid grid-cols-4 gap-4",children:[z([{label:t("SEARCH"),className:"mb-0",children:a(R,{value:i.name,onChange:e=>m({...i,name:e.target.value}),placeholder:`IP/${t("DESC")}`})}]),a(w,{className:"mb-0",onQuery:()=>l(),onReset:()=>m({type:"ip"})})]})}),a(I,{title:o(q,{onClick:()=>{u({...n,title:t("ADD"),open:!0}),d({})},type:"primary",children:["+ ",t("security.NEW_ACCOUNT")]}),children:a(W,{rowKey:e=>e._id,onChange:e=>l(e),pagination:c,loading:S,columns:D,dataSource:C})}),a(A,{selectedItem:s,setSelectedItem:d,...n,onOk:()=>g()})]})};export{V as default};
