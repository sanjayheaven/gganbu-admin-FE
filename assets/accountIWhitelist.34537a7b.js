var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,i)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i,o=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&n(e,t,a[t]);if(i)for(var t of i(a))s.call(a,t)&&n(e,t,a[t]);return e},c=(e,i)=>a(e,t(i));import{F as l}from"./filterAction.34a7e436.js";import{d,I as m,u as p,c as u,g as f}from"./ipDetail.e2627473.js";import{u as b,ae as y,y as g,af as h,U as j,V as v,I as w,b6 as I}from"./index.d73c0318.js";import{u as O,a as x,b as P,c as S}from"./index.d571304b.js";import{u as N}from"./useTablePagination.e436cb7c.js";import{u as k,a as C}from"./index.7cc91fe6.js";import{C as D}from"./index.10212801.js";import{T as A}from"./Table.d37fe026.js";var _=()=>{const{filter:e,setFilter:a}=O({type:"account"}),{pagination:t,setPagination:i}=N(),{selectedItem:r,setSelectedItem:s}=k({}),{modal:n,setModal:_}=C({}),{data:z,setData:E}=x([]),{loading:T,setLoading:F}=P(!1),q=async a=>{try{F(!0);const r=await f(c(o({},e),{current:(null==a?void 0:a.current)||t.current,pageSize:(null==a?void 0:a.pageSize)||t.pageSize})),{items:s=[],total:n}=r;F(!1),E(s),i(c(o(o({},t),a||{}),{total:n}))}catch(r){}},K=[{title:"Ip",dataIndex:"ip"},{title:"Desc",dataIndex:"desc"},{title:"Action",render:(e,a)=>b(y,{children:[g("a",{onClick:()=>{s(o({},a)),_(c(o({},n),{visible:!0,title:"Edit"}))},children:"Edit"}),g("a",{className:"text-red-600",onClick:()=>{h.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await d(a._id),await q()}catch(e){}}})},children:"Delete"})]})}].map((e=>c(o({},e),{key:e.dataIndex})));return S(e,(()=>q(c(o({},t),{current:1})))),b("div",{children:[g(D,{className:"mb-4",children:b("div",{className:"grid grid-cols-4 gap-4",children:[j([{label:"Name",className:"mb-0",children:g(v,{value:e.name,onChange:t=>a(c(o({},e),{name:t.target.value})),placeholder:"ip/desc"})}]),g(l,{className:"mb-0",onQuery:()=>q(),onReset:()=>a({type:"ip"})})]})}),g(D,{title:g(w,{onClick:()=>{_(c(o({},n),{title:"Add",visible:!0})),s({})},type:"primary",children:"+ New Account"}),children:g(A,{rowKey:e=>e._id,onChange:e=>q(e),pagination:t,loading:T,columns:K,dataSource:z})}),g(m,c(o({selectedItem:r,setSelectedItem:s},n),{onOk:()=>(async()=>{const{staffId:e}=r;if(!e)return I.error("Please finish all required info");try{r._id?await p(r._id,r):await u(c(o({},r),{type:"account"})),_(c(o({},n),{visible:!1})),await q()}catch(a){}})()}))]})};export{_ as default};
