var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&n(e,a,t[a]);if(i)for(var a of i(t))s.call(t,a)&&n(e,a,t[a]);return e},l=(e,i)=>t(e,a(i));import{F as c}from"./filterAction.fed61267.js";import{d,I as m,u as p,c as u,g as f}from"./ipDetail.c98ee6b0.js";import{u as b,z as y,P as g,S as h,U as j,J as v,aV as w}from"./index.e94451d3.js";import{u as I,a as O,b as x,c as S}from"./index.12b98fe3.js";import{u as P}from"./useTablePagination.fad55048.js";import{u as N,a as k}from"./index.c344d948.js";import{S as C}from"./index.368d9b00.js";import{C as D}from"./index.39f2749e.js";import{T as z}from"./Table.720b178c.js";var A=()=>{const{filter:e,setFilter:t}=I({type:"account"}),{pagination:a,setPagination:i}=P(),{selectedItem:r,setSelectedItem:s}=N({}),{modal:n,setModal:A}=k({}),{data:_,setData:E}=O([]),{loading:T,setLoading:F}=x(!1),q=async t=>{try{F(!0);const r=await f(l(o({},e),{current:(null==t?void 0:t.current)||a.current,pageSize:(null==t?void 0:t.pageSize)||a.pageSize})),{items:s=[],total:n}=r;F(!1),E(s),i(l(o(o({},a),t||{}),{total:n}))}catch(r){}},J=[{title:"Ip",dataIndex:"ip"},{title:"Desc",dataIndex:"desc"},{title:"Action",render:(e,t)=>b(C,{children:[y("a",{onClick:()=>{s(o({},t)),A(l(o({},n),{visible:!0,title:"Edit"}))},children:"Edit"}),y("a",{className:"text-red-600",onClick:()=>{g.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await d(t._id),await q()}catch(e){}}})},children:"Delete"})]})}].map((e=>l(o({},e),{key:e.dataIndex})));return S(e,(()=>q(l(o({},a),{current:1})))),b("div",{children:[y(D,{className:"mb-4",children:b("div",{className:"grid grid-cols-4 gap-4",children:[h([{label:"Name",className:"mb-0",children:y(j,{value:e.name,onChange:a=>t(l(o({},e),{name:a.target.value})),placeholder:"ip/desc"})}]),y(c,{className:"mb-0",onQuery:()=>q(),onReset:()=>t({type:"ip"})})]})}),y(D,{title:y(v,{onClick:()=>{A(l(o({},n),{title:"Add",visible:!0})),s({})},type:"primary",children:"+ New Account"}),children:y(z,{rowKey:e=>e._id,onChange:e=>q(e),pagination:a,loading:T,columns:J,dataSource:_})}),y(m,l(o({selectedItem:r,setSelectedItem:s},n),{onOk:()=>(async()=>{const{staffId:e}=r;if(!e)return w.error("Please finish all required info");try{r._id?await p(r._id,r):await u(l(o({},r),{type:"account"})),A(l(o({},n),{visible:!1})),await q()}catch(t){}})()}))]})};export{A as default};
