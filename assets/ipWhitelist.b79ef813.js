import{u as S,c as k,b as C,a as N,d as F,F as W,T as D}from"./filterAction.bad607a6.js";import{d as v,I as M,u as _,c as j,g as z}from"./ipDetail.7b8d9539.js";import{j as m,bg as A,a as t,b9 as E,b as L,I as O,ad as T,ba as q}from"./index.fd722815.js";import{u as B,a as K}from"./index.9b56791e.js";import{C as f}from"./index.3e5b4951.js";const U=()=>{const{filter:r,setFilter:u}=S({type:"ip"}),{pagination:i,setPagination:I}=k(),{selectedItem:s,setSelectedItem:d}=B({}),{modal:c,setModal:n}=K({}),{data:p,setData:y}=C([]),{loading:b,setLoading:h}=N(!1),g=async()=>{const{ip:e,desc:a}=s;if(!a||!e)return q.error("Please finish all required info");try{s._id?await _(s._id,s):await j({...s,type:"ip"}),n({...c,open:!1}),await l()}catch{}},l=async e=>{try{h(!0);const a=await z({...r,current:(e==null?void 0:e.current)||i.current,pageSize:(e==null?void 0:e.pageSize)||i.pageSize}),{items:o=[],total:x}=a;h(!1),y(o),I({...i,...e||{},total:x})}catch{}},w=[{title:"Ip",dataIndex:"ip"},{title:"Desc",dataIndex:"desc"},{title:"Action",render:(e,a)=>m(A,{children:[t("a",{onClick:()=>{d({...a}),n({...c,open:!0,title:"Edit"})},children:"Edit"}),t("a",{className:"text-red-600",onClick:()=>{E.confirm({content:"Sure to delete this item?",onOk:async()=>{try{await v(a._id),await l()}catch{}}})},children:"Delete"})]})}].map(e=>({...e,key:e.dataIndex}));return F(r,()=>l({...i,current:1})),m("div",{children:[t(f,{className:"mb-4",children:m("div",{className:"grid grid-cols-4 gap-4",children:[L([{label:"Name",className:"mb-0",children:t(O,{value:r.name,onChange:e=>u({...r,name:e.target.value}),placeholder:"ip/desc"})}]),t(W,{className:"mb-0",onQuery:()=>l(),onReset:()=>u({type:"ip"})})]})}),t(f,{title:t(T,{onClick:()=>{n({...c,title:"Add",open:!0}),d({})},type:"primary",children:"+ New Ip"}),children:t(D,{rowKey:e=>e._id,onChange:e=>l(e),pagination:i,loading:b,columns:w,dataSource:p})}),t(M,{selectedItem:s,setSelectedItem:d,...c,onOk:()=>g()})]})};export{U as default};
